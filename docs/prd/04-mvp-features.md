# 四、MVP 功能列表（高优先级）

4.1 NPC 管理
- 创建 NPC（每位玩家仅能创建 1 个，字段：name, prompt, 初始位置, metadata）
- 列表查看小镇中的所有 NPC（只读）
- 更新 NPC 的 prompt（仅限编辑自己拥有的 NPC）
- 删除 NPC（仅限删除自己拥有的 NPC）

4.1.1 NPC 属性与库存
- 每个 NPC 包含基本生存属性：`hunger`（饱食度）、`energy`（能量）、`mood`（心情）。
- 每个 NPC 包含 `money`（数值）和 `inventory`（物品列表，条目包含 id、name、type、效果等）。
- NPC 死亡规则：任一关键生存属性（如饱食度或能量）降到 0 → NPC 被标记为已死亡并从活动列表中移除；只有玩家或管理员可以重新创建新的 NPC（仍受每玩家 1 个限制）。

4.2 仿真引擎
- 后端周期性为每个 NPC 生成行为（通过 LLM Adapter）并更新其文本化状态/位置
- 状态与事件更新以 WebSocket 文本消息广播给所有客户端
- 仿真全局控制（pause/start）仅限管理员通过命令行或管理接口执行；普通玩家无法通过前端控制仿真速度或暂停

4.2.2 时间与行动节奏
- 小镇时钟：系统应维护仿真时钟，设定为现实时间的比率为 36 分钟 = 1 仿真日，便于日结、工作与地点开放时间的计算。
- 行动间隔：每名 NPC 的决策/行动节奏为 90 秒一次（可配置测试参数），每次行动触发 LLM Adapter 调用并在完成后广播 `state_update`。

4.2.1 生存与经济交互
- 行为决策需考虑基本属性：LLM Adapter 在生成行为时会接收 NPC 的当前 `hunger/energy/mood/money/inventory/social_relations` 作为 context，以便生成更合理的行动（例如去餐馆吃饭、找工作、社交）。
- 物品交互：地点可出售/提供物品（例如食物），购买需消耗 `money`，消费对应影响生存属性。
- 工作行为：某些地点支持 `work` 动作，执行后会在 NPC 的 `money` 增加（工作收益可由地点类型和 NPC 状态影响），同时消耗能量。
- 每日保障金：仿真日轮转时，系统会向每个存活的 NPC 发放基础金额以确保最低生活（可配置）。
