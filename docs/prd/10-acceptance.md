# 十、验收标准（每项均需可自动/人工验证）

7.1 基本 CRUD
- 创建 NPC：POST /npc（包含 player_id）返回新对象并且 WebSocket 推送 npc_created（验证: 前端文本显示新 NPC）。若玩家已有 NPC，则返回 400/冲突错误。
- 更新 prompt：POST /npc/{id}/prompt（仅允许 NPC 所有者）返回更新对象并且 WebSocket 推送 npc_updated（验证: 前端显示新 prompt，但行为变化基于仿真步而非即时必然生效）
- 删除 NPC：DELETE /npc/{id}（仅允许 NPC 所有者或管理员）返回 200 并且前端移除 NPC

7.1 补充验收（生存、经济、社交）
- 生存属性：创建 NPC，在不干预的情况下观察多日仿真，属性会随时间下降/变化；当 `hunger` 或 `energy` 达到 0 时 NPC 被标记为死亡并广播死亡事件
- 购买与物品：在商店地点购买食物后，消费该食物应恢复指定的 `hunger/energy` 值；购买会消耗 `money` 并把物品加入 `inventory`
- 工作收益与保障金：在工作地点执行 `work` 操作后，NPC 的 `money` 增加（收益合理）；每个仿真日结算时，所有存活 NPC 收到基础保障金并能在日志中看到入账记录
- 社交关系：当两名 NPC 在同一地点相遇时，会生成或更新社交关系（例如 friend 增加亲密度）；社交事件应在前端日志中可见

7.1.1 补充验收（时间与记忆）
- 时间刻度：确认现实 36 分钟等于仿真 1 天（通过观察仿真时钟与日结事件、保障金发放时序来验证）。
- 行动频率：在创建若干 NPC 后，验证每个 NPC 每 90 秒至少进行一次决策/行动并产生 `state_update` 广播（可以通过日志计数验证）。
- 记忆保留：创建 NPC 并运行多日仿真后，验证最近 7 天的逐日事件仍以详细条目保留，超过 7 天的历史以 LLM 摘要条目出现（可通过调用 `GET /npc/{id}/memory` 查看并比对原始事件/摘要）。

7.2 仿真与状态更新
-- 启动后端服务，创建 10 个 NPC，模拟 600 秒内至少出现状态更新（state_update）广播
-- 仿真 pause/start 控制由管理员在服务器端命令行或受限管理接口发起，普通玩家的控制请求不具备权限

7.3 前端展示
- 地图能展示 NPC 节点位置（坐标映射合理）
- 点击或查看 NPC 能看到其当前状态文本
